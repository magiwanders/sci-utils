(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){"use strict";console.log("SCI Utilities!"),document.getElementById("calculate").onclick=async()=>{let e=c(document.getElementById("metric").value),t=await d(e);document.getElementById("results").innerHTML=JSON.stringify(t,null,4)};function c(e){switch(e){case"gdp":return{page:"List_of_continents_by_GDP",title:"GDP in US Billions",table:0,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppp":return{page:"List_of_continents_by_GDP",title:"GDP in US Billions (PPP Adjusted)",table:1,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppc":return{page:"List_of_continents_by_GDP",title:"GDP Per Capita in US Dollars",table:2,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppcpp":return{page:"List_of_continents_by_GDP",title:"GDP Per Capita in US Dollars (PPP Adjusted)",table:3,fromRow:2,toRow:7,fromCol:1,toCol:2};case"pop":return{page:"List_of_continents_and_continental_subregions_by_population",title:"Population",table:0,fromRow:2,toRow:7,fromCol:0,toCol:1}}}async function d(e){let t="https://www.wikitable2json.com/api/"+e.page+"?table="+e.table+"&lang=en&cleanRef=false",o=await fetch(t).then(a=>a.json().then(i=>i)),l=p(o[0],e.fromRow,e.toRow,e.fromCol,e.toCol);return g(_(l),e.title)}function g(e,t){let o={title:t};for(let l of e)o[l[0]]={reale:l[1],persone:l[2]};return o}function _(e){let t=w(e,1),o=t.reduce((n,f)=>n+f,0),l=document.getElementById("participants").value,a=o/l,i=Math.min(...t),u=t.map(n=>l*(n-i)/(o-i)),r=u.map(n=>Math.round(n));for(;P(r,l)!=0;){let n=o,f=0;for(let s=0;s<r.length;s++){let m=Math.abs(u[s]-a*(r[s]+1));m<n&&(n=m,f=s)}r[f]+=1}for(let n in e)e[n].push(r[n]);return e.unshift(["Total",o,l]),e}function p(e,t,o,l,a){return e.slice(t,o+1).map(i=>i.slice(l,a+1))}function w(e,t){return p(e,0,e.length,t,t+1).map(o=>parseInt(o[0].replaceAll(",","")))}function P(e,t){return t-e.reduce((o,l)=>o+l,0)}});
