(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){"use strict";function c(e){let t=[];t.push(_tr({},[_th({colspan:"3"},e.title+" - One person is: "+e.Total.onePerson)])),t.push(_tr({},[_th({},"Continent"),_th({},"Actual number"),_th({},"Preople in the game")])),console.log(e);for(let o of Object.keys(e))o!="title"&&t.push(_tr({},[_th({},o.toString()),_th({},e[o].reale),_th({},e[o].persone.toString())]));return _table({id:"resultsTable"},t)}console.log("SCI Utilities!"),document.getElementById("calculate").onclick=async()=>{let e=m(document.getElementById("metric").value),t=await g(e);document.getElementById("results").innerHTML="",document.getElementById("results").append(c(t))};function m(e){switch(e){case"gdp":return{page:"List_of_continents_by_GDP",title:"GDP in US Billions",table:0,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppp":return{page:"List_of_continents_by_GDP",title:"GDP in US Billions (PPP Adjusted)",table:1,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppc":return{page:"List_of_continents_by_GDP",title:"GDP Per Capita in US Dollars",table:2,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppcpp":return{page:"List_of_continents_by_GDP",title:"GDP Per Capita in US Dollars (PPP Adjusted)",table:3,fromRow:2,toRow:7,fromCol:1,toCol:2};case"pop":return{page:"List_of_continents_and_continental_subregions_by_population",title:"Population",table:0,fromRow:2,toRow:7,fromCol:0,toCol:1};case"energy":return{page:"List_of_countries_by_electricity_consumption",title:"Energy consumption in exaJoule",table:1,fromRow:1,toRow:6,fromCol:0,toCol:1};case"refugees":return{page:"List_of_countries_by_refugee_population",title:"Refugees or refugee-like population by hosting continent",table:2,fromRow:1,toRow:6,fromCol:0,toCol:1}}}async function g(e){let t="https://www.wikitable2json.com/api/"+e.page+"?table="+e.table+"&lang=en&cleanRef=false",o=await fetch(t).then(i=>i.json().then(r=>r)),n=p(o[0],e.fromRow,e.toRow,e.fromCol,e.toCol);return d(h(n),e.title)}function d(e,t){let o={title:t};for(let n of e)o[n[0]]={reale:n[1].toString(),persone:parseFloat(n[2])},n[0]=="Total"&&(o.Total.onePerson=n[3]);return o}function h(e){let t=b(e,1),o=t.reduce((l,u)=>l+u,0),n=document.getElementById("participants").value,i=o/n,r=Math.min(...t),f=t.map(l=>n*(l-r)/(o-r)),s=f.map(l=>Math.round(l));for(;w(s,n)!=0;){let l=o,u=0;for(let a=0;a<s.length;a++){let _=Math.abs(f[a]-i*(s[a]+1));_<l&&(l=_,u=a)}s[u]+=1}for(let l in e)e[l].push(s[l]);return e.unshift(["Total",o,n,i]),e}function p(e,t,o,n,i){return e.slice(t,o+1).map(r=>r.slice(n,i+1))}function b(e,t){return p(e,0,e.length,t,t+1).map(o=>parseInt(o[0].replaceAll(",","")))}function w(e,t){return t-e.reduce((o,n)=>o+n,0)}});
