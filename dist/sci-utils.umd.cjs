(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){"use strict";console.log("SCI Utilities!"),document.getElementById("calculate").onclick=async()=>{let e=c(document.getElementById("metric").value),t=await f(e);document.getElementById("results").innerHTML=JSON.stringify(t,null,4)};function c(e){switch(e){case"gdp":return{page:"List_of_continents_by_GDP",title:"GDP in US Billions",table:0,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppp":return{page:"List_of_continents_by_GDP",table:1,fromRow:2,toRow:7,fromCol:1,toCol:2};case"gdppc":return{page:"List_of_continents_by_GDP",table:2};case"gdppcpp":return{page:"List_of_continents_by_GDP",table:3}}}async function f(e){let t="https://www.wikitable2json.com/api/"+e.page+"?table="+e.table+"&lang=en&cleanRef=false",n=await fetch(t).then(l=>l.json().then(a=>a)),o=s(n[0],e.fromRow,e.toRow,e.fromCol,e.toCol);return p(u(o),e.title)}function p(e,t){let n={title:t};for(let o of e)n[o[0]]={reale:o[1],persone:o[2]};return n}function u(e){let t=d(e,1),n=t.reduce((i,_)=>i+_,0),o=document.getElementById("participants").value,l=Math.min(...t),a=t.map(i=>o*(i-l)/(n-l)),r=a.map(i=>Math.floor(i));for(;m(r,o)!=0;)r[g(a,r)]+=1;for(let i in e)e[i].push(r[i]);return e.unshift(["Total",n,o]),e}function s(e,t,n,o,l){return e.slice(t,n+1).map(a=>a.slice(o,l+1))}function d(e,t){return s(e,0,e.length,t,t+1).map(n=>parseFloat(n[0].replace(",",".")))}function m(e,t){return t-e.reduce((n,o)=>n+o,0)}function g(e,t){let n=[];for(let l=0;l<e.length;l++)n.push(e[l]-t[l]);let o=Math.max(...n);return n.indexOf(o)}});
